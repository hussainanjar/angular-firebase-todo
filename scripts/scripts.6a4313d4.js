!function(a){"use strict";a.module("todosApp",["ngRoute","firebase"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/todos.html",controller:"TodosCtrl"}).otherwise({redirectTo:"/"})}]).constant("TODOURL","https://glaring-fire-7135.firebaseio.com/todos/")}(window.angular),function(a){"use strict";a.module("todosApp").controller("TodosCtrl",["$scope","$firebase","$q","TODOURL",function(b,c,d,e){var f=new Firebase(e);b.todos={doneCount:0,todoList:c(f),markAllDone:!1,total:0,editingTodo:null},b.$watch("todos.todoList",function(){var a=0,c=0;b.todos.todoList.$getIndex().forEach(function(d){var e=b.todos.todoList[d];e&&e.title&&(a++,e.done===!0&&c++)}),b.todos.total=a,b.todos.doneCount=c},!0),b.addTodo=function(){console.log("Adding Todo: "+b.newTodo);var a={title:b.newTodo,done:!1};b.todos.todoList.$add(a),b.newTodo=""},b.toggleDone=function(a){console.log("Toggle Todo: "+a);var c=b.todos.todoList[a];c.done=!c.done,c.done?b.todos.doneCount+=1:b.todos.doneCount-=1,b.todos.todoList.$save(a)},b.clearDone=function(){console.log("Clear Done"),a.forEach(b.todos.todoList.$getIndex(),function(a){b.todos.todoList[a].done&&b.todos.todoList.$remove(a)}),b.todos.doneCount=0},b.markAllDone=function(){console.log("Mark All Done: "+b.todos.markAllDone);var c=b.todos.todoList;a.forEach(b.todos.todoList.$getIndex(),function(a){b.todos.todoList[a].done=!b.todos.markAllDone}),b.todos.doneCount=b.todos.markAllDone?0:c.total,b.todos.todoList.$save()},b.editTodo=function(c){console.log("Edit Todo: "+c),b.todos.editingTodo=b.todos.todoList[c],b.originalTodo=a.extend({},b.todos.editingTodo)},b.revertTodo=function(a){console.log("Revert Todo: "+a),b.todos.editingTodo=null,b.todos.todoList[a]=b.originalTodo},b.closeEditTodo=function(a){console.log("Close Edit Todo: "+a),b.todos.editingTodo=null,b.todos.todoList.$save(a)},b.deleteTodo=function(a){console.log("Deleting Todo: "+a),b.todos.todoList.$remove(a)}}])}(window.angular),function(a){"use strict";a.module("todosApp").directive("todoEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.todoEnter)}),b.preventDefault())})}})}(window.angular),function(a){"use strict";a.module("todosApp").directive("todoEscape",function(){var a=27;return function(b,c,d){c.bind("keydown",function(c){c.keyCode===a&&b.$apply(d.todoEscape)})}})}(window.angular);